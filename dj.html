<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>DCE • REQUESTS</title>
<style>
  :root{
    --bg:#212121;
    --section:#363636;
    --subsection:#424242;
    --border:#2b2b2b;
    --ink:#f2f2f2;
    --muted:#bdbdbd;

    --accent:#1dcec9;   /* Mark as Played */
    --amber:#f7b731;    /* Mark as Unplayed */
    --danger:#b22222;   /* Remove */
    --put:#d81b60;      /* Put Back */

    --radius:12px;
    --maxw:1100px;
  }

  @font-face{
    font-family:"Adventor";
    src:url("texgyreadventor-regular.otf") format("opentype");
    font-weight:400; font-style:normal; font-display:swap;
  }

  *{ box-sizing:border-box; }
  html,body{
    margin:0; background:var(--bg); color:var(--ink);
    font-family:"Adventor", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  }

  .wrap{ max-width:var(--maxw); margin:0 auto; padding:16px 14px 56px; }

  /* Header */
  .dce-logo{ text-align:center; margin:14px 0 6px; }
  .dce-logo img{ max-width:min(220px,60vw); height:auto; }
  .page-title{
    text-align:center; margin:0 auto 26px; letter-spacing:.06em; font-weight:800;
    font-size:clamp(22px,5.5vw,36px);
  }

  .panel{
    background:var(--section);
    border:1px solid var(--border);
    border-radius:var(--radius);
    padding:14px;
    margin-bottom:14px;
  }
  label{ display:block; font-size:14px; color:var(--muted); margin:0 0 6px; }
  select{
    height:46px; border-radius:12px; border:1px solid #3a3a3a;
    background:#2a2a2a; color:#fff; font-size:15px; padding:0 12px; width:100%;
  }

  /* Inline info row (fixed height) */
  .inline-row{ display:flex; align-items:center; gap:10px; margin-top:8px; min-height:24px; }
  .inline-text{ font-size:14px; font-weight:600; }
  .inline-text.good{ color:#34d399; }
  .inline-text.bad{ color:#ef4444; }
  .progress{
    position:relative; height:6px; flex:1 1 240px; max-width:360px;
    background:#2a2a2a; border-radius:999px; overflow:hidden; border:1px solid #333; display:none;
  }
  .progress.show{ display:block; }
  .progress::after{
    content:""; position:absolute; inset:0;
    background:linear-gradient(90deg, rgba(29,206,201,.15) 0%, rgba(29,206,201,.65) 50%, rgba(29,206,201,.15) 100%);
    transform:translateX(-100%); animation:bar 1.4s linear infinite;
  }
  @keyframes bar{ to{ transform:translateX(100%); } }
  .spin{ margin-left:auto; width:18px; height:18px; border-radius:50%;
    border:2px solid rgba(255,255,255,.25); border-top-color:#bbb; animation:spin .9s linear infinite; display:none; }
  .spin.show{ display:inline-block; }
  @keyframes spin{ to{ transform:rotate(360deg);} }

  /* Tabs (folder style) */
  .tabs-bar{ display:flex; align-items:flex-end; gap:0; border-bottom:1px solid var(--border); padding:0 6px; margin-bottom:10px; }
  .tab-btn{
    height:36px; padding:0 14px; font-size:13px; color:#fff;
    background:#2f2f2f; border:1px solid var(--border); border-bottom:none;
    border-top-left-radius:10px; border-top-right-radius:10px;
    margin:0 6px; transform:translateY(1px); cursor:pointer;
  }
  .tab-btn.active{ background:var(--subsection); transform:translateY(0); }
  .hidden{ display:none!important; }

  /* Collapsibles */
  .collapsible{ background:var(--subsection); border:1px solid var(--border); border-radius:12px; padding:10px; margin-top:10px; }
  .collapsible-header{ display:flex; align-items:center; justify-content:space-between; cursor:pointer; user-select:none; }
  .twist{ width:18px; height:18px; display:grid; place-items:center; margin-left:8px; }
  .collapsible-body{ display:none; margin-top:10px; }
  .collapsible.open .collapsible-body{ display:block; }
  .count-pill{ font-size:13px; color:#dcdcdc; opacity:.9; margin-left:8px; }

  .list{ display:grid; gap:10px; }

  .card{
    background:var(--section);
    border:1px solid var(--border);
    border-radius:12px;
    padding:10px;
    display:grid;
    grid-template-columns:64px 1fr 190px;
    gap:12px;
    /* Key change: pin items to the TOP so art/buttons don't recenter */
    align-items:start;
  }
  .card.appear{ opacity:0; transform:translateY(8px); }
  .card.appear.card-ready{ transition:opacity .28s ease, transform .28s ease; opacity:1; transform:none; }
  .no-anim *{ transition:none!important; }

  @media (max-width:760px){ .card{ grid-template-columns:64px 1fr; } .card .actions{ grid-column:1/-1; } }

  .thumb{ width:64px;height:64px;border-radius:10px;background:#1f1f1f;object-fit:cover;display:block; align-self:start; } /* keep at top */
  .meta{ min-width:0; }
  .title{ margin:0 0 2px; font-weight:800; font-size:16px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; color:#fff; }
  .sub{ margin:0; color:#e6e6e6; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

  .reqline{ display:flex; align-items:center; gap:10px; margin-top:2px; cursor:pointer; user-select:none; }
  .reqline .car{ font-size:18px; line-height:1; font-weight:800; color:#eaeaea; }
  .reqline .txt{ font-size:14px; color:#eaeaea; font-weight:700; }
  .names-box{ margin-top:6px; background:var(--subsection); border:1px solid var(--border); border-radius:10px; padding:8px 10px; display:none; }
  .names-box.open{ display:block; }
  .names-box .hdr{ color:#cfcfcf; font-size:13px; margin:0 0 4px; }
  .names-box ul{ margin:0; padding-left:18px; }
  .names-box li{ margin:3px 0; color:#fafafa; font-size:13px; }

  .actions{ display:grid; gap:6px; align-self:start; } /* keep buttons at top */
  .btn{
    display:inline-flex; align-items:center; justify-content:center;
    padding:0 10px; height:30px; font-size:12px; line-height:1;
    border-radius:8px; border:1px solid transparent; cursor:pointer;
    box-shadow:0 2px 0 rgba(0,0,0,.35), 0 8px 14px rgba(0,0,0,.15);
    width:82%; margin:0 auto;
  }
  .btn:hover{ filter:brightness(1.05); }
  .btn.played{   background:var(--accent); border-color:var(--accent); color:#000; }
  .btn.unplayed{ background:var(--amber);  border-color:var(--amber);  color:#000; }
  .btn.remove{   background:var(--danger); border-color:var(--danger); color:#fff; }
  .btn.putback{  background:var(--put);    border-color:var(--put);    color:#fff; }
  .btn[disabled]{ opacity:.7; cursor:not-allowed; }

  .footer-line{ margin-top:10px; color:#fff; font-size:12px; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="dce-logo">
      <img src="assets/dce-logo.png" alt="David Charles Events" onerror="this.style.display='none'">
    </div>
    <div class="page-title">REQUESTS</div>

    <div class="panel">
      <label for="eventSel">Select Your Event</label>
      <select id="eventSel"></select>

      <div class="inline-row">
        <span id="inlineText" class="inline-text"></span>
        <div id="inlineProgress" class="progress"></div>
        <span id="inlineSpin" class="spin" aria-hidden="true"></span>
      </div>
    </div>

    <div class="panel">
      <div class="tabs-bar">
        <button id="tabRequests" class="tab-btn active" type="button">Requests</button>
        <button id="tabSpam" class="tab-btn" type="button">Spam</button>
      </div>

      <div id="tabRequestsPane">
        <div class="collapsible open" id="reqWrap">
          <div class="collapsible-header" data-target="reqBody">
            <div>Requests <span id="reqCount" class="count-pill">(0)</span></div>
            <div class="twist">▾</div>
          </div>
          <div id="reqBody" class="collapsible-body">
            <div id="reqList" class="list"></div>
          </div>
        </div>

        <div class="collapsible" id="playedWrap">
          <div class="collapsible-header" data-target="playedBody">
            <div>Played Songs <span id="playedCount" class="count-pill">(0)</span></div>
            <div class="twist">▸</div>
          </div>
          <div id="playedBody" class="collapsible-body">
            <div id="playedList" class="list"></div>
          </div>
        </div>

        <div class="collapsible" id="removedWrap">
          <div class="collapsible-header" data-target="removedBody">
            <div>Removed Songs <span id="removedCount" class="count-pill">(0)</span></div>
            <div class="twist">▸</div>
          </div>
          <div id="removedBody" class="collapsible-body">
            <div id="removedList" class="list"></div>
          </div>
        </div>

        <div class="footer-line" id="statusLine"></div>
      </div>

      <div id="tabSpamPane" class="hidden">
        <div style="margin:6px 0 10px; font-size:18px; font-weight:800;">
          Spammed Requests <span id="spamCountTop" class="count-pill">(0)</span>
        </div>
        <div id="spamList" class="list"></div>
      </div>
    </div>
  </div>

<script>
/* ===== Config / polling / rendering remain the same as your current working file ===== */
/* For brevity, keep your existing JS exactly as-is. No JS changes are required for this tweak. */
</script>
</body>
</html>
